---
import Layout from '@/layouts/Layout.astro';
import ProfileLayout from '@/layouts/ProfileLayout.astro';
import Container from '@/components/ui/Container.astro';
import { DiscountsDataTable } from '@/components/Admin/DiscountsDataTable';
import { requireAdminAuth } from '@/lib/auth-utils';
import AdminBreadcrumbs from '@/components/Admin/AdminBreadcrumbs.astro';

const authResult = await requireAdminAuth(Astro);
if (authResult instanceof Response) {
  return authResult;
}
---

<Layout title="Discount Codes">
  <ProfileLayout>
    <Container width="marginy">
      <div class="max-w-8xl mt-20 lg:mt-0 mx-auto">
        <AdminBreadcrumbs
          items={[{ label: 'Discounts' }]}
          pageTitle="Discount Codes"
          pageDescription="Manage discount codes and promotional offers"
        />

        <div class="card bg-base-100 shadow-sm">
          <div class="card-body">
            <DiscountsDataTable client:only="react" />
          </div>
        </div>
      </div>
    </Container>
  </ProfileLayout>
</Layout>

<style>
  .table th {
    font-weight: 600;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .input-group input:focus {
    outline: none;
    border-color: oklch(var(--p));
  }
</style>
