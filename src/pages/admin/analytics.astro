---
import Container from '@/components/ui/Container.astro';
import { OrdersChart } from '@/components/Admin/OrdersChart';
import { ProductSalesChart } from '@/components/Admin/ProductSalesChart';
import Layout from '@/layouts/Layout.astro';
import ProfileLayout from '@/layouts/ProfileLayout.astro';
import AdminBreadcrumbs from '@/components/Admin/AdminBreadcrumbs.astro';
import { requireAdminAuth } from '@/lib/auth-utils';

const authResult = await requireAdminAuth(Astro);
if (authResult instanceof Response) {
  return authResult;
}
---

<Layout title="Analytics Dashboard">
  <ProfileLayout title="Analytics Dashboard">
    <Container width="marginy">
      <AdminBreadcrumbs
        items={[{ label: 'Analytics' }]}
        pageTitle="Order Analytics"
        pageDescription="Track your store's performance and sales metrics"
      />
      <div class="flex flex-col gap-4">
        <OrdersChart client:only="react" />
        <ProductSalesChart client:only="react" />
      </div>
    </Container>
  </ProfileLayout>
</Layout>
